{"ast":null,"code":"import _classCallCheck from\"C:/Users/NorthAlley/React_Projects/dealspakado/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/NorthAlley/React_Projects/dealspakado/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/NorthAlley/React_Projects/dealspakado/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/NorthAlley/React_Projects/dealspakado/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import CouponResult from'./FilterComponents/CouponResult';import'../HomeComponent/Css/NewCss.css';import API from'../API_Config';import CouponFilter from'./FilterComponents/CouponFilter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Coupon=/*#__PURE__*/function(_Component){_inherits(Coupon,_Component);var _super=_createSuper(Coupon);function Coupon(props){var _this;_classCallCheck(this,Coupon);_this=_super.call(this,props);_this.fetchProducts=function(){var selectedCategory=_this.state.selectedCategory;var apiUrl=\"\".concat(API,\"/api/couponcodes/getAllCodes\");var filterParams=[];if(selectedCategory){// Changed to selectedCategory\nfilterParams.push(\"category=\".concat(selectedCategory));// Changed to category\n}if(filterParams.length>0){apiUrl+=\"?\".concat(filterParams.join(''));}fetch(apiUrl).then(function(response){if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(function(data){_this.setState({products:data,error:null});}).catch(function(error){_this.setState({});});};_this.handleCategoryChange=function(category){// Changed to handleCategoryChange\n_this.setState({selectedCategory:category},function(){// Changed to selectedCategory\n_this.fetchProducts();});};_this.state={selectedCategory:'',// Changed to selectedCategory\nproducts:[],error:null};return _this;}_createClass(Coupon,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchProducts();}},{key:\"render\",value:function render(){var _this$state=this.state,selectedCategory=_this$state.selectedCategory,products=_this$state.products,error=_this$state.error;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CouponFilter,{selectedCategory:selectedCategory// Changed to selectedCategory\n,onCategoryChange:this.handleCategoryChange// Changed to onCategoryChange\n}),error?/*#__PURE__*/_jsxs(\"p\",{children:[\"Error fetching products: \",error.message]}):/*#__PURE__*/_jsx(CouponResult,{products:products})]});}}]);return Coupon;}(Component);export default Coupon;","map":{"version":3,"names":["React","Component","CouponResult","API","CouponFilter","jsx","_jsx","jsxs","_jsxs","Coupon","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","fetchProducts","selectedCategory","state","apiUrl","concat","filterParams","push","length","join","fetch","then","response","ok","Error","json","data","setState","products","error","catch","handleCategoryChange","category","_createClass","key","value","componentDidMount","render","_this$state","children","onCategoryChange","message"],"sources":["C:/Users/NorthAlley/React_Projects/dealspakado/src/Components/NavbarComponent/Coupon.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport CouponResult from './FilterComponents/CouponResult';\r\nimport '../HomeComponent/Css/NewCss.css';\r\nimport API from '../API_Config';\r\nimport CouponFilter from './FilterComponents/CouponFilter';\r\n\r\nclass Coupon extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedCategory: '', // Changed to selectedCategory\r\n      products: [],\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchProducts();\r\n  }\r\n\r\n  fetchProducts = () => {\r\n    const { selectedCategory } = this.state;\r\n    let apiUrl = `${API}/api/couponcodes/getAllCodes`;\r\n\r\n    const filterParams = [];\r\n\r\n    if (selectedCategory) { // Changed to selectedCategory\r\n      filterParams.push(`category=${selectedCategory}`); // Changed to category\r\n    }\r\n\r\n    if (filterParams.length > 0) {\r\n      apiUrl += `?${filterParams.join('')}`;\r\n    }\r\n\r\n    fetch(apiUrl)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok');\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        this.setState({ products: data, error: null });\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ });\r\n      });\r\n  };\r\n\r\n  handleCategoryChange = (category) => { // Changed to handleCategoryChange\r\n    this.setState({ selectedCategory: category }, () => { // Changed to selectedCategory\r\n      this.fetchProducts();\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { selectedCategory, products, error } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <CouponFilter\r\n          selectedCategory={selectedCategory} // Changed to selectedCategory\r\n          onCategoryChange={this.handleCategoryChange} // Changed to onCategoryChange\r\n        />\r\n        {error ? (\r\n          <p>Error fetching products: {error.message}</p>\r\n        ) : (\r\n          <CouponResult products={products} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Coupon;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}